# TrayGPT (traygpt)

TrayGPT is a platform-independent application that lives in the tray bar of your favorite OS, and is compatible with Windows, macOS, and Linux. It is powered by [Electron](https://electron.org), [Vue.js](https://vuejs.org) and [Quasar](https://quasar.dev), and provides a simple and intuitive user experience. It allows users to communicate with [GPT-based AI](https://openai.com) in a natural and conversational way, making it easy to access and generate information. It has build in chat session management, which enables users to easily dust off and return to those long forgotten topics.

## Use the built binaries
If you want to use the application, head to the [releases](https://github.com/PeterBlenessy/TrayGPT/releases), select the binary for your OS, install it, and ask away.

### Settings
You will need to register for an OpenAI account and get an `OpenAI API key` to be able to use the application. You can do it [here](https://platform.openai.com/account/api-keys). Register the API key in the app settings. 

> **Note**
> The API key is stored in the application's internal database called IndexedDB and not leave the application or computer you are running it on.
> A future improvement will be to store it in a secure key store.

## Use the source code
If you want to build your own binaries or modify the code to fit your preferences, follow the below steps.

### Install the dependencies

```bash
yarn
# or
npm install
```

### Start the app in development mode (hot-code reloading, error reporting, etc.)

```bash
quasar dev -m electron
```

or, if you don't have the [Quasar Global CLI](https://quasar.dev/start/quick-start) installed,

```bash
yarn quasar dev -m electron
```

### Lint the files

```bash
yarn lint
# or
npm run lint
```

### Format the files

```bash
yarn format
# or
npm run format
```

### Build the app for production

```bash
yarn cicd
# This evaluates to 
# yarn git:push && yarn release:draft && yarn build:all && yarn release:publish
```
This commands starts a series of commands as can be seen in package.json:
* Push code to the Github repo, with commit message extracted from CHANGELOG.md
* Create a draft release of this version
* Build the application for all configured architectures
* Sign the application binary
* Notarize the application with Apple notarization service
* Upload the resulting binaries to draft release
* Publish the release

> **Note**
> Publishing a draft release is done by editing the release and setting `--draft=false`. This requires gh version 2.8.0 or higher.
> To be able to run GitHub commands, a `GH_TOKEN` needs to be generated and added to `.env` file.
> Read more: https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token

#### Signing and notarizing the macOS app
For signing, notarizing Mac binaries some steps are needed.

To be able to sign for Mac, `developer certificates` need to be generated.
Read more: https://www.electron.build/code-signing

To be able to notarize for Mac, `APPLE_ID` and `APPLE_ID_PASSWORD` need to be set. 
Read more: https://github.com/karaggeorge/electron-builder-notarize

> **Note**
> The `APPLE_ID_PASSWORD` is not the password to the regular appleId, but an application specific password generated by Apple.

In case notarization fails due to `Error: Failed to upload app to Apple's notarization servers`:
```bash
sudo xcode-select -r
```

### Customize the configuration

See [Configuring quasar.config.js](https://v2.quasar.dev/quasar-cli-vite/quasar-config-js).
